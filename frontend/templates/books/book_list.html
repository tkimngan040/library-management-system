{% extends "base.html" %}
{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/books.css') }}">

<div class="container">
    <h2>Book List</h2>

    <form method="get" class="filter-bar">
        <select name="category">
            <option value="">All Categories</option>
            {% for c in categories %}
                <option value="{{ c.category_id }}"
                    {% if c.category_id == selected_category %}selected{% endif %}>
                    {{ c.category_name }}
                </option>
            {% endfor %}
        </select>

        <select name="sort">
            <option value="title">Title</option>
            <option value="status">Status</option>
        </select>

        <select name="order">
            <option value="asc">A-Z</option>
            <option value="desc">Z-A</option>
        </select>

        <button type="submit" class="btn-primary">Apply</button>
    </form>

    <div class="book-grid">
        {% for book in books %}
            <div class="book-card">
                <h3>{{ book.title }}</h3>
                <p><strong>Author:</strong> {{ book.author }}</p>
                <p><strong>Status:</strong>
                    <span class="{{ book.status|lower }}">
                        {{ book.status }}
                    </span>
                </p>
                <a href="{{ url_for('books.book_detail', book_id=book.book_id) }}"
                   class="btn-secondary">View Details</a>
            </div>
        {% else %}
            <p>No books found.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
